<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Otono Theme 3 Revision ‚Äî Otono Team</title>
  <meta name="description" content="Otono Team Theme 3 revision checklist with estimated score and grades (A‚ÄìH + 9‚Äì1) and BIG PASS/MERIT/DISTINCTION outcome." />
  <style>
    :root{
      --bg0:#0b0612;
      --bg1:#12081f;
      --card:#140a22cc;
      --stroke:#3b1a66;
      --purple:#7c3aed;
      --purple2:#a855f7;
      --red:#ef4444;
      --red2:#fb7185;
      --text:#efe9ff;
      --muted:#cbb8ff;
      --good:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 20px;
      --radius2: 28px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 900px at 20% 10%, rgba(124,58,237,.35), transparent 55%),
        radial-gradient(1100px 800px at 80% 0%, rgba(239,68,68,.25), transparent 55%),
        radial-gradient(900px 700px at 60% 90%, rgba(168,85,247,.20), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100vh;
    }
    a{ color:inherit; text-decoration:none; }
    .wrap{ max-width:1200px; margin:0 auto; padding:28px 18px 60px; }
    header{
      display:flex; flex-wrap:wrap; gap:12px;
      align-items:center; justify-content:space-between;
      margin-bottom:18px;
    }
    .brand{ display:flex; align-items:center; gap:12px; }
    .logo{
      width:46px; height:46px; border-radius:18px;
      background: linear-gradient(135deg, rgba(239,68,68,.95), rgba(124,58,237,.95));
      box-shadow: 0 10px 30px rgba(124,58,237,.22);
      position:relative; overflow:hidden;
    }
    .logo:before{
      content:"";
      position:absolute; inset:-40%;
      background: repeating-linear-gradient(45deg, rgba(255,255,255,.18) 0 8px, rgba(255,255,255,0) 8px 16px);
      transform:rotate(12deg);
      opacity:.35;
    }
    .title h1{
      margin:0;
      font-size:18px;
      letter-spacing:.2px;
      line-height:1.1;
    }
    .title p{
      margin:4px 0 0;
      color:var(--muted);
      font-size:13px;
    }

    .top-actions{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:flex-end;
    }
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius:14px;
      background: linear-gradient(135deg, rgba(124,58,237,.25), rgba(239,68,68,.18));
      border:1px solid rgba(124,58,237,.35);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      font-weight:900;
      font-size:13px;
      cursor:pointer;
      user-select:none;
      transition:transform .12s ease, filter .12s ease, border-color .12s ease;
    }
    .btn:hover{ transform: translateY(-1px); filter:brightness(1.03); border-color: rgba(168,85,247,.55); }
    .btn:active{ transform: translateY(0px); filter:brightness(.98); }
    .btn.secondary{
      background: rgba(20,10,34,.55);
      border:1px solid rgba(239,68,68,.28);
    }
    .btn.small{ padding:8px 10px; border-radius:12px; font-size:12px; }
    .pill{
      font-family:var(--mono);
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(239,68,68,.25);
      background: rgba(20,10,34,.45);
      color: var(--muted);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
    }
    @media (max-width: 940px){
      .grid{ grid-template-columns: 1fr; }
    }

    /* THEME 3: Different card style (same background) */
    .card{
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
      border:1px solid rgba(124,58,237,.22);
      background:
        radial-gradient(800px 260px at 12% 0%, rgba(239,68,68,.18), transparent 60%),
        radial-gradient(820px 260px at 88% 0%, rgba(124,58,237,.22), transparent 60%),
        linear-gradient(180deg, rgba(10,5,18,.72), rgba(18,9,30,.72));
    }
    .card .hd{
      padding:16px 16px 12px;
      border-bottom: 1px solid rgba(124,58,237,.16);
      background:
        linear-gradient(135deg, rgba(239,68,68,.10), rgba(124,58,237,.12)),
        rgba(0,0,0,.06);
    }
    .card .hd h2{
      margin:0;
      font-size:15px;
      letter-spacing:.2px;
    }
    .card .hd p{
      margin:6px 0 0;
      font-size:12.5px;
      color: var(--muted);
      line-height:1.4;
    }
    .card .bd{ padding:14px 16px 16px; }

    label{
      font-size:12px;
      color: var(--muted);
      font-weight:900;
      letter-spacing:.2px;
    }
    select, input[type="text"]{
      width:100%;
      padding:11px 12px;
      border-radius:14px;
      border:1px solid rgba(239,68,68,.22);
      background: rgba(6,3,10,.52);
      color: var(--text);
      outline:none;
      font-weight:900;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
    }
    select:focus, input[type="text"]:focus{
      border-color: rgba(124,58,237,.55);
      box-shadow: 0 0 0 3px rgba(124,58,237,.12);
    }

    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 540px){
      .controls{ grid-template-columns: 1fr; }
    }

    .row{
      display:flex; gap:12px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
      margin:10px 0 14px;
    }
    .searchWrap{ display:flex; gap:10px; align-items:center; }
    .searchWrap input{ flex:1; }
    .hint{
      margin-top:10px;
      font-size:12.2px;
      color: var(--muted);
      line-height:1.45;
    }

    .list{
      margin-top:12px;
      display:grid;
      gap:10px;
    }
    .item{
      border-radius:18px;
      border:1px solid rgba(239,68,68,.16);
      background:
        radial-gradient(600px 140px at 10% 0%, rgba(124,58,237,.14), transparent 60%),
        linear-gradient(180deg, rgba(14,7,24,.62), rgba(10,5,18,.62));
      padding:12px 12px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:space-between;
    }
    .left{
      display:flex;
      gap:10px;
      align-items:flex-start;
      min-width:0;
      flex:1;
    }
    .cb{
      margin-top:2px;
      width:18px; height:18px;
      accent-color: var(--red2);
      cursor:pointer;
    }
    .txt{ min-width:0; flex:1; }
    .phrase{
      font-weight:1000;
      letter-spacing:.2px;
      font-size:13.5px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .meta{
      margin-top:4px;
      font-size:12px;
      color: var(--muted);
      line-height:1.35;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .tags{
      display:flex;
      gap:6px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
      margin-left:8px;
      max-width:340px;
    }
    .tag{
      font-family:var(--mono);
      font-size:11px;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(124,58,237,.22);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      white-space:nowrap;
    }
    .tag.r{ border-color: rgba(239,68,68,.22); }

    /* RIGHT SIDE stats: BIG outcomes */
    .statGrid{ display:grid; grid-template-columns:1fr; gap:12px; }

    .mega{
      border-radius:22px;
      border:1px solid rgba(124,58,237,.22);
      background:
        radial-gradient(900px 260px at 20% 0%, rgba(239,68,68,.18), transparent 60%),
        radial-gradient(900px 260px at 80% 0%, rgba(124,58,237,.20), transparent 60%),
        linear-gradient(180deg, rgba(14,7,24,.70), rgba(10,5,18,.70));
      padding:16px 14px;
      text-align:center;
    }
    .mega .label{
      font-family:var(--mono);
      font-size:12px;
      color:var(--muted);
      letter-spacing:.25px;
      margin-bottom:8px;
    }
    .mega .outcomeBig{
      font-size:34px;
      font-weight:1100;
      line-height:1.05;
      letter-spacing:.6px;
      margin:0;
      padding:2px 0 6px;
    }
    .mega .gradesRow{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .chipBig{
      border-radius:999px;
      padding:10px 12px;
      border:1px solid rgba(239,68,68,.20);
      background: rgba(0,0,0,.18);
      min-width: 120px;
    }
    .chipBig .k{
      font-family:var(--mono);
      font-size:11px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .chipBig .v{
      font-size:20px;
      font-weight:1100;
      line-height:1;
    }
    .chipBig.p{ border-color: rgba(124,58,237,.22); }
    .chipBig.r{ border-color: rgba(239,68,68,.22); }

    .stat{
      border-radius:18px;
      border:1px solid rgba(239,68,68,.14);
      background: linear-gradient(180deg, rgba(14,7,24,.62), rgba(10,5,18,.62));
      padding:12px 12px;
    }
    .stat h3{
      margin:0 0 8px;
      font-size:13px;
      letter-spacing:.2px;
    }
    .big{
      font-size:28px;
      font-weight:1100;
      line-height:1;
      letter-spacing:.3px;
    }
    .sub{
      margin-top:6px;
      font-size:12px;
      color: var(--muted);
      line-height:1.4;
    }
    .bar{
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(239,68,68,.12);
      overflow:hidden;
      margin-top:10px;
    }
    .fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(124,58,237,.95), rgba(239,68,68,.95));
      border-radius:999px;
      transition:width .18s ease;
    }

    .bounds{
      font-family:var(--mono);
      font-size:12px;
      line-height:1.55;
      color: var(--muted);
      border-radius:18px;
      border:1px solid rgba(124,58,237,.18);
      background: rgba(0,0,0,.16);
      padding:12px 12px;
    }
    .bounds strong{ color: var(--text); }

    .note{
      font-size:12px;
      color: var(--muted);
      line-height:1.5;
      margin-top:10px;
    }
    .footer{
      margin-top:14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      color: var(--muted);
      font-size:12px;
    }
    .mono{ font-family:var(--mono); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <h1>OTONO THEME 3 REVISION ‚Äî Otono Airways ‚Ä¢ Otono Mansion</h1>
          <p>Tick your phrases ‚Ä¢ score (0‚Äì100) ‚Ä¢ BIG outcome ‚Ä¢ grades (A‚ÄìH + 9‚Äì1) ‚Ä¢ for Otono Tests</p>
        </div>
      </div>

      <div class="top-actions">
        <a class="btn secondary" href="https://otonoteam2.github.io">‚¨Ö Back to Main Menu (otonoteam2.github.io)</a>
        <button class="btn secondary" id="toggleAllBtn" type="button">‚òë Tick / Untick ALL</button>
        <button class="btn" id="resetBtn" type="button">‚ôª Reset ticks</button>
        <span class="pill" id="wordNeed">Words needed for 100: ‚Äî</span>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT -->
      <section class="card" aria-label="Phrase checklist">
        <div class="hd">
          <h2>Phrase Bank (Theme 3)</h2>
          <p>Theme 3 covers Otono Airways (fleet + classes + A380 features) and Otono Mansion (residence + rooms). Search for ‚ÄúA380‚Äù, ‚ÄúOtono One‚Äù, ‚Äúlounge‚Äù, ‚Äúshowers‚Äù, ‚Äúeconomy‚Äù, ‚Äú90 rooms‚Äù.</p>
        </div>
        <div class="bd">
          <div class="controls">
            <div>
              <label for="langSel">Language</label>
              <select id="langSel" aria-label="Select language">
                <option value="fr">üá´üá∑ francais</option>
                <option value="es">üá™üá∏ espanol</option>
                <option value="it">üáÆüáπ italiano</option>
                <option value="de">üá©üá™ deutsch</option>
              </select>
            </div>
            <div>
              <label for="modeSel">Display mode</label>
              <select id="modeSel" aria-label="Select display mode">
                <option value="phrases">Phrases (sentence builder)</option>
                <option value="vocab">Vocab list (words only)</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div style="flex:1; min-width:260px;">
              <label for="searchBox">Search</label>
              <div class="searchWrap">
                <input id="searchBox" type="text" placeholder="Search: A380, Otono One, first class, business, lounge, showers, legroom, 90 rooms, mansion..." />
                <button class="btn small" id="clearSearch" type="button">Clear</button>
              </div>
              <div class="hint">
                Higher-tier tip: tick across fleet + classes + onboard features + mansion rooms + opinions + time frames.
              </div>
            </div>
          </div>

          <div class="list" id="phraseList" aria-live="polite"></div>
        </div>
      </section>

      <!-- RIGHT -->
      <aside class="card" aria-label="Score and grades">
        <div class="hd">
          <h2>BIG Outcome & Grades</h2>
          <p>This panel is intentionally large. Outcome uses your Otono rules: FAIL (0‚Äì65) ‚Ä¢ PASS (66‚Äì79) ‚Ä¢ MERIT (80‚Äì89) ‚Ä¢ DISTINCTION (90+).</p>
        </div>
        <div class="bd">
          <div class="statGrid">

            <div class="mega" id="megaBox">
              <div class="label">YOUR OUTCOME</div>
              <div class="outcomeBig" id="outcomeBig">FAIL</div>
              <div class="gradesRow">
                <div class="chipBig r">
                  <div class="k">A‚ÄìH grade</div>
                  <div class="v" id="gradeAH">U</div>
                </div>
                <div class="chipBig p">
                  <div class="k">9‚Äì1 grade</div>
                  <div class="v" id="grade91">1</div>
                </div>
                <div class="chipBig r">
                  <div class="k">Score</div>
                  <div class="v"><span id="scoreOut">0</span>/100</div>
                </div>
              </div>
              <div class="bar" aria-hidden="true"><div class="fill" id="barFill"></div></div>
              <div class="sub" id="coverageOut" style="margin-top:10px;">Coverage: 0 / 0 items</div>
            </div>

            <div class="stat">
              <h3>Words needed for a perfect score</h3>
              <div class="sub">
                Total items in this language: <strong id="totalItems">0</strong><br/>
                Remaining to tick for 100: <strong id="remainItems">0</strong>
              </div>
            </div>

            <div class="bounds" aria-label="Grade boundaries A to H">
              <strong>Adjusted A‚ÄìH grade boundaries (Otono)</strong><br/>
              S: 101+ (secret grade)<br/>
              A: 95‚Äì100<br/>
              B: 80‚Äì94<br/>
              C: 70‚Äì79<br/>
              D: 66‚Äì69<br/>
              E: 55‚Äì65<br/>
              F: 45‚Äì54<br/>
              G: 30‚Äì44<br/>
              H: 15‚Äì29<br/>
              U: 0‚Äì14
            </div>

            <div class="note">
              9‚Äì1 estimate mapping (internal):<br/>
              9: 90‚Äì100 ‚Ä¢ 8: 80‚Äì89 ‚Ä¢ 7: 70‚Äì79 ‚Ä¢ 6: 66‚Äì69 ‚Ä¢ 5: 55‚Äì65 ‚Ä¢ 4: 45‚Äì54 ‚Ä¢ 3: 30‚Äì44 ‚Ä¢ 2: 15‚Äì29 ‚Ä¢ 1: 0‚Äì14
            </div>

          </div>

          <div class="footer">
            <span>Otono Theme 3 ‚Ä¢ Different style ‚Ä¢ Same background</span>
            <span class="mono">Auto-saves locally</span>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // ==========================================================
    // THEME 3 DATA: Otono Airways + Otono Mansion
    // (Balanced amounts: FR most, ES strong, IT medium, DE limited)
    // ==========================================================

    const DATA = {
      fr: {
        name: "üá´üá∑ francais",
        phrases: [
          // --- Otono Airways basics
          { t:"Otono Airways est une compagnie a√©rienne internationale.", k:["airline","intro"] },
          { t:"Le hub principal est √† Londres Heathrow.", k:["airline","hub"] },
          { t:"Otono Airways a aussi un bureau √† Hong Kong.", k:["hong kong","office"] },
          { t:"La compagnie dessert de nombreuses destinations.", k:["destinations"] },
          { t:"Je voyage souvent avec Otono Airways.", k:["opinions"] },

          // --- Fleet
          { t:"La flotte comprend des Airbus A380, A350 et A320.", k:["fleet","airbus"] },
          { t:"La flotte comprend aussi des Boeing 777 et 787.", k:["fleet","boeing"] },
          { t:"L‚ÄôAirbus A380 est le plus grand avion de la compagnie.", k:["A380"] },
          { t:"Le Boeing 777 est moderne et confortable.", k:["777"] },
          { t:"L‚ÄôAirbus A350 est tr√®s silencieux.", k:["A350"] },
          { t:"Le Boeing 787 est efficace et agr√©able.", k:["787"] },
          { t:"L‚ÄôAirbus A320 est utilis√© pour les vols courts.", k:["A320"] },

          // --- Legend fleet
          { t:"La flotte l√©gendaire comprend le Boeing 747.", k:["legend fleet","747"] },
          { t:"La flotte l√©gendaire comprend aussi l‚ÄôAirbus A340.", k:["legend fleet","A340"] },
          { t:"Ces avions sont iconiques, m√™me s‚Äôils sont plus anciens.", k:["legend fleet","opinions"] },

          // --- Classes
          { t:"Il y a cinq classes √† bord.", k:["classes"] },
          { t:"Otono One est la classe la plus luxueuse.", k:["Otono One","classes"] },
          { t:"La premi√®re classe est tr√®s confortable.", k:["first class","classes"] },
          { t:"La classe affaires est moderne et pratique.", k:["business","classes"] },
          { t:"La premium economy est plus spacieuse que l‚Äô√©conomie.", k:["premium economy","classes"] },
          { t:"La classe √©conomique est plus abordable.", k:["economy","classes"] },

          // --- A380 features
          { t:"Sur l‚ÄôA380, il y a un salon √† bord.", k:["A380","lounge"] },
          { t:"Sur l‚ÄôA380, il y a des douches pour les passagers premium.", k:["A380","showers"] },
          { t:"J‚Äôaime le salon parce qu‚Äôon peut se d√©tendre.", k:["lounge","opinions"] },
          { t:"Les douches sont impressionnantes sur un avion.", k:["showers","opinions"] },

          // --- Seats and comfort
          { t:"Mon si√®ge a un grand √©cran individuel.", k:["seat","screen"] },
          { t:"Le si√®ge peut s‚Äôincliner pour dormir.", k:["seat","comfort"] },
          { t:"Il y a une tablette et un repose-pieds.", k:["seat","features"] },
          { t:"En economy, l‚Äôespace pour les jambes est tr√®s bon.", k:["economy","legroom"] },
          { t:"Je pr√©f√®re une place c√¥t√© hublot.", k:["seat","preferences"] },
          { t:"Je pr√©f√®re une place c√¥t√© couloir pour bouger facilement.", k:["seat","preferences"] },

          // --- A380 layout
          { t:"L‚ÄôA380 a un pont principal et un pont sup√©rieur.", k:["A380","layout"] },
          { t:"Les classes sont s√©par√©es par des portes.", k:["layout","classes"] },
          { t:"√Ä l‚Äôarri√®re, il y a un espace lounge.", k:["layout","lounge"] },

          // --- Destinations
          { t:"Otono Airways propose des vols vers l‚ÄôEurope et l‚ÄôAsie.", k:["destinations"] },
          { t:"J‚Äôaimerais aller √† Hong Kong ou au Japon.", k:["destinations","future"] },

          // --- Opinions / reasons
          { t:"Je pr√©f√®re Otono Airways parce que le service est excellent.", k:["opinions","reasons"] },
          { t:"Je trouve les si√®ges tr√®s confortables.", k:["opinions","comfort"] },
          { t:"Je pense que la compagnie est tr√®s bien organis√©e.", k:["opinions"] },

          // --- Mansion (Unit 9)
          { t:"Otono Mansion est la r√©sidence de l‚ÄôOtono Team.", k:["mansion","intro"] },
          { t:"Il y a environ 90 pi√®ces dans le manoir.", k:["mansion","90 rooms"] },
          { t:"Le manoir est immense et impressionnant.", k:["mansion","opinions"] },
          { t:"Il y a des chambres, des salons et des pi√®ces sp√©ciales.", k:["mansion","rooms"] },
          { t:"Mon endroit pr√©f√©r√© est une grande salle de jeux.", k:["mansion","opinions"] },

          // --- Describe rooms
          { t:"Dans ma chambre, il y a un lit, un bureau et des d√©corations.", k:["rooms","description"] },
          { t:"Dans le salon, il y a des canap√©s et une grande t√©l√©vision.", k:["rooms","description"] },

          // --- Tenses
          { t:"Normalement, je voyage pendant les vacances.", k:["tenses","present"] },
          { t:"L‚Äôann√©e derni√®re, j‚Äôai pris un vol long-courrier.", k:["tenses","past"] },
          { t:"√Ä l‚Äôavenir, je vais choisir Otono One si possible.", k:["tenses","future","Otono One"] }
        ],
        vocab: [
          { t:"une compagnie a√©rienne", k:["airline"] },
          { t:"un hub", k:["hub"] },
          { t:"une destination", k:["destinations"] },
          { t:"la flotte", k:["fleet"] },
          { t:"l‚ÄôAirbus A380", k:["A380"] },
          { t:"le Boeing 777", k:["777"] },
          { t:"l‚ÄôAirbus A350", k:["A350"] },
          { t:"le Boeing 787", k:["787"] },
          { t:"l‚ÄôAirbus A320", k:["A320"] },
          { t:"la flotte l√©gendaire", k:["legend fleet"] },
          { t:"le Boeing 747", k:["747"] },
          { t:"l‚ÄôAirbus A340", k:["A340"] },
          { t:"la premi√®re classe", k:["first class"] },
          { t:"la classe affaires", k:["business"] },
          { t:"la premium economy", k:["premium economy"] },
          { t:"la classe √©conomique", k:["economy"] },
          { t:"l‚Äôespace pour les jambes", k:["legroom"] },
          { t:"un si√®ge", k:["seat"] },
          { t:"un hublot", k:["seat"] },
          { t:"un couloir", k:["seat"] },
          { t:"un salon √† bord", k:["lounge"] },
          { t:"une douche", k:["showers"] },
          { t:"un pont", k:["layout"] },
          { t:"un manoir", k:["mansion"] },
          { t:"une pi√®ce", k:["rooms"] }
        ]
      },

      es: {
        name: "üá™üá∏ espanol",
        phrases: [
          { t:"Otono Airways es una aerol√≠nea internacional.", k:["airline"] },
          { t:"El hub principal est√° en Londres Heathrow.", k:["hub"] },
          { t:"La aerol√≠nea tambi√©n tiene una oficina en Hong Kong.", k:["hong kong"] },
          { t:"Tiene muchos destinos en Europa y Asia.", k:["destinations"] },

          { t:"La flota incluye Airbus A380, A350 y A320.", k:["fleet"] },
          { t:"Tambi√©n incluye Boeing 777 y 787.", k:["fleet"] },
          { t:"El Airbus A380 es el avi√≥n m√°s grande.", k:["A380"] },
          { t:"El Boeing 777 es moderno y c√≥modo.", k:["777"] },
          { t:"El Airbus A350 es muy silencioso.", k:["A350"] },
          { t:"El Boeing 787 es eficiente.", k:["787"] },

          { t:"La flota legendaria incluye el Boeing 747 y el Airbus A340.", k:["legend fleet"] },
          { t:"Son aviones ic√≥nicos, aunque son m√°s antiguos.", k:["legend fleet","opinions"] },

          { t:"Hay cinco clases a bordo.", k:["classes"] },
          { t:"Otono One es la clase m√°s lujosa.", k:["Otono One"] },
          { t:"La primera clase es excelente.", k:["first class"] },
          { t:"La clase business es muy c√≥moda.", k:["business"] },
          { t:"La premium economy es m√°s espaciosa.", k:["premium economy"] },
          { t:"La clase econ√≥mica es m√°s barata.", k:["economy"] },

          { t:"En el A380 hay un sal√≥n a bordo.", k:["lounge","A380"] },
          { t:"En el A380 hay duchas para pasajeros premium.", k:["showers","A380"] },

          { t:"Mi asiento tiene una pantalla individual.", k:["seat"] },
          { t:"El asiento se reclina para dormir.", k:["seat","comfort"] },
          { t:"En econ√≥mica hay buen espacio para las piernas.", k:["legroom","economy"] },
          { t:"Prefiero un asiento de ventanilla.", k:["seat","preferences"] },

          { t:"El A380 tiene dos cubiertas.", k:["layout","A380"] },

          { t:"Otono Mansion es la residencia del equipo Otono.", k:["mansion"] },
          { t:"El mansi√≥n tiene unas 90 habitaciones.", k:["mansion","90 rooms"] },
          { t:"Es enorme e impresionante.", k:["opinions"] },
          { t:"En mi habitaci√≥n hay una cama y un escritorio.", k:["rooms"] },

          { t:"Normalmente viajo en vacaciones.", k:["tenses"] },
          { t:"El a√±o pasado tom√© un vuelo de larga distancia.", k:["tenses"] },
          { t:"En el futuro quiero viajar en Otono One.", k:["tenses","Otono One"] }
        ],
        vocab: [
          { t:"una aerol√≠nea", k:["airline"] },
          { t:"un hub", k:["hub"] },
          { t:"un destino", k:["destinations"] },
          { t:"la flota", k:["fleet"] },
          { t:"el Airbus A380", k:["A380"] },
          { t:"el Boeing 777", k:["777"] },
          { t:"el Airbus A350", k:["A350"] },
          { t:"el Boeing 787", k:["787"] },
          { t:"el Airbus A320", k:["A320"] },
          { t:"la flota legendaria", k:["legend fleet"] },
          { t:"la primera clase", k:["first class"] },
          { t:"la clase business", k:["business"] },
          { t:"la premium economy", k:["premium economy"] },
          { t:"la clase econ√≥mica", k:["economy"] },
          { t:"el espacio para las piernas", k:["legroom"] },
          { t:"un asiento", k:["seat"] },
          { t:"una ventanilla", k:["seat"] },
          { t:"un pasillo", k:["seat"] },
          { t:"un sal√≥n a bordo", k:["lounge"] },
          { t:"una ducha", k:["showers"] },
          { t:"una cubierta", k:["layout"] },
          { t:"una mansi√≥n", k:["mansion"] },
          { t:"una habitaci√≥n", k:["rooms"] }
        ]
      },

      it: {
        name: "üáÆüáπ italiano",
        phrases: [
          { t:"Otono Airways √® una compagnia aerea internazionale.", k:["airline"] },
          { t:"L‚Äôhub principale √® a Londra Heathrow.", k:["hub"] },
          { t:"C‚Äô√® anche un ufficio a Hong Kong.", k:["hong kong"] },

          { t:"La flotta include Airbus A380, A350 e A320.", k:["fleet"] },
          { t:"Include anche Boeing 777 e 787.", k:["fleet"] },
          { t:"L‚ÄôAirbus A380 √® l‚Äôaereo pi√π grande.", k:["A380"] },

          { t:"La flotta leggendaria include Boeing 747 e Airbus A340.", k:["legend fleet"] },

          { t:"Ci sono cinque classi a bordo.", k:["classes"] },
          { t:"Otono One √® la classe pi√π lussuosa.", k:["Otono One"] },
          { t:"C‚Äô√® la prima classe e la business.", k:["classes"] },
          { t:"La premium economy √® pi√π spaziosa.", k:["premium economy"] },
          { t:"In economy c‚Äô√® buon spazio per le gambe.", k:["legroom"] },

          { t:"Sull‚ÄôA380 c‚Äô√® un lounge a bordo.", k:["lounge"] },
          { t:"Sull‚ÄôA380 ci sono docce per i passeggeri premium.", k:["showers"] },

          { t:"Otono Mansion √® una residenza enorme.", k:["mansion"] },
          { t:"Ci sono circa 90 stanze.", k:["90 rooms"] }
        ],
        vocab: [
          { t:"una compagnia aerea", k:["airline"] },
          { t:"la flotta", k:["fleet"] },
          { t:"la prima classe", k:["first class"] },
          { t:"la business", k:["business"] },
          { t:"la classe economica", k:["economy"] },
          { t:"lo spazio per le gambe", k:["legroom"] },
          { t:"un sedile", k:["seat"] },
          { t:"un lounge", k:["lounge"] },
          { t:"una doccia", k:["showers"] },
          { t:"un palazzo", k:["mansion"] },
          { t:"una stanza", k:["rooms"] }
        ]
      },

      de: {
        name: "üá©üá™ deutsch",
        phrases: [
          { t:"Otono Airways ist eine internationale Fluggesellschaft.", k:["airline"] },
          { t:"Der Airbus A380 ist sehr gro√ü.", k:["A380"] },
          { t:"Es gibt verschiedene Klassen an Bord.", k:["classes"] },
          { t:"Otono One ist sehr luxuri√∂s.", k:["Otono One"] },
          { t:"In der Economy-Klasse gibt es gute Beinfreiheit.", k:["legroom"] },
          { t:"Im A380 gibt es eine Lounge und Duschen.", k:["lounge","showers"] },
          { t:"Otono Mansion ist sehr gro√ü und hat etwa 90 Zimmer.", k:["mansion","90 rooms"] }
        ],
        vocab: [
          { t:"die Fluggesellschaft", k:["airline"] },
          { t:"die Flotte", k:["fleet"] },
          { t:"der Airbus A380", k:["A380"] },
          { t:"die First Class", k:["first class"] },
          { t:"die Business Class", k:["business"] },
          { t:"die Economy Class", k:["economy"] },
          { t:"die Beinfreiheit", k:["legroom"] },
          { t:"die Lounge", k:["lounge"] },
          { t:"die Dusche", k:["showers"] },
          { t:"das Herrenhaus", k:["mansion"] },
          { t:"das Zimmer", k:["rooms"] }
        ]
      }
    };

    // -----------------------------------
    // Persistence
    // -----------------------------------
    const STORAGE_KEY = "otono_theme3_checklist_v1";

    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : {};
      }catch(e){ return {}; }
    }
    function saveState(state){
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }catch(e){}
    }
    let state = loadState();

    const langSel = document.getElementById("langSel");
    const modeSel = document.getElementById("modeSel");
    const phraseList = document.getElementById("phraseList");
    const searchBox = document.getElementById("searchBox");
    const clearSearch = document.getElementById("clearSearch");
    const resetBtn = document.getElementById("resetBtn");
    const toggleAllBtn = document.getElementById("toggleAllBtn");

    const scoreOut = document.getElementById("scoreOut");
    const barFill = document.getElementById("barFill");
    const coverageOut = document.getElementById("coverageOut");
    const gradeAH = document.getElementById("gradeAH");
    const grade91 = document.getElementById("grade91");
    const outcomeBig = document.getElementById("outcomeBig");

    const totalItems = document.getElementById("totalItems");
    const remainItems = document.getElementById("remainItems");
    const wordNeed = document.getElementById("wordNeed");
    const megaBox = document.getElementById("megaBox");

    // -----------------------------------
    // Grade functions (your rules)
    // -----------------------------------
    function gradeAHFromScore(s){
      if (s >= 101) return "S";
      if (s >= 95) return "A";
      if (s >= 80) return "B";
      if (s >= 70) return "C";
      if (s >= 66) return "D";
      if (s >= 55) return "E";
      if (s >= 45) return "F";
      if (s >= 30) return "G";
      if (s >= 15) return "H";
      return "U";
    }
    function grade91FromScore(s){
      if (s >= 90) return "9";
      if (s >= 80) return "8";
      if (s >= 70) return "7";
      if (s >= 66) return "6";
      if (s >= 55) return "5";
      if (s >= 45) return "4";
      if (s >= 30) return "3";
      if (s >= 15) return "2";
      return "1";
    }
    function outcomeFromScore(s){
      if (s >= 90) return "DISTINCTION";
      if (s >= 80) return "MERIT";
      if (s >= 66) return "PASS";
      return "FAIL";
    }

    function applyOutcomeStyle(outcome){
      // Big visual emphasis: border + glow changes (still red/purple)
      let border = "rgba(239,68,68,.22)";
      let glow = "0 0 0 0 rgba(0,0,0,0)";
      if (outcome === "DISTINCTION"){
        border = "rgba(34,197,94,.35)";
        glow = "0 0 0 4px rgba(34,197,94,.10)";
      } else if (outcome === "MERIT"){
        border = "rgba(245,158,11,.35)";
        glow = "0 0 0 4px rgba(245,158,11,.10)";
      } else if (outcome === "PASS"){
        border = "rgba(124,58,237,.35)";
        glow = "0 0 0 4px rgba(124,58,237,.10)";
      } else {
        border = "rgba(239,68,68,.28)";
        glow = "0 0 0 4px rgba(239,68,68,.08)";
      }
      megaBox.style.borderColor = border;
      megaBox.style.boxShadow = glow;
    }

    // -----------------------------------
    // State helpers
    // -----------------------------------
    function getKey(lang, mode){ return `${lang}_${mode}`; }
    function isChecked(lang, mode, idx){
      const key = getKey(lang, mode);
      return !!(state[key] && state[key][idx]);
    }
    function setChecked(lang, mode, idx, value){
      const key = getKey(lang, mode);
      if (!state[key]) state[key] = {};
      state[key][idx] = value ? 1 : 0;
      saveState(state);
    }

    function matchesSearch(item, q){
      if (!q) return true;
      q = q.toLowerCase().trim();
      const text = item.t.toLowerCase();
      const tags = (item.k || []).join(" ").toLowerCase();
      return text.includes(q) || tags.includes(q);
    }

    // -----------------------------------
    // Render list
    // -----------------------------------
    function render(){
      const lang = langSel.value;
      const mode = modeSel.value;
      const q = searchBox.value;

      const pack = DATA[lang];
      const items = (mode === "vocab") ? pack.vocab : pack.phrases;

      phraseList.innerHTML = "";
      let shown = 0;

      items.forEach((it, idx) => {
        if (!matchesSearch(it, q)) return;
        shown++;

        const checked = isChecked(lang, mode, idx);

        const el = document.createElement("div");
        el.className = "item";

        const left = document.createElement("div");
        left.className = "left";

        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.className = "cb";
        cb.checked = checked;
        cb.addEventListener("change", () => {
          setChecked(lang, mode, idx, cb.checked);
          updateStats();
        });

        const txt = document.createElement("div");
        txt.className = "txt";

        const phrase = document.createElement("div");
        phrase.className = "phrase";
        phrase.textContent = it.t;

        const meta = document.createElement("div");
        meta.className = "meta";
        meta.textContent = (mode === "vocab") ? "Word item" : "Sentence pattern";

        txt.appendChild(phrase);
        txt.appendChild(meta);

        left.appendChild(cb);
        left.appendChild(txt);

        const tags = document.createElement("div");
        tags.className = "tags";
        (it.k || []).slice(0, 4).forEach((tagText, i) => {
          const tag = document.createElement("span");
          tag.className = "tag " + (i % 2 === 0 ? "" : "r");
          tag.textContent = tagText;
          tags.appendChild(tag);
        });

        el.appendChild(left);
        el.appendChild(tags);

        phraseList.appendChild(el);
      });

      if (shown === 0){
        const empty = document.createElement("div");
        empty.className = "bounds";
        empty.innerHTML = "<strong>No results.</strong><br/>Try a different search term (e.g., A380, Otono One, lounge, showers, economy, mansion).";
        phraseList.appendChild(empty);
      }

      updateStats();
    }

    // -----------------------------------
    // Stats
    // -----------------------------------
    function updateStats(){
      const lang = langSel.value;
      const mode = modeSel.value;
      const pack = DATA[lang];
      const items = (mode === "vocab") ? pack.vocab : pack.phrases;

      const total = items.length;
      let known = 0;
      for (let i=0;i<total;i++){
        if (isChecked(lang, mode, i)) known++;
      }

      const score = total === 0 ? 0 : Math.round((known / total) * 100);

      scoreOut.textContent = String(score);
      barFill.style.width = score + "%";
      coverageOut.textContent = `Coverage: ${known} / ${total} items`;

      const out = outcomeFromScore(score);
      outcomeBig.textContent = out;

      gradeAH.textContent = gradeAHFromScore(score);
      grade91.textContent = grade91FromScore(score);

      totalItems.textContent = String(total);
      const remaining = Math.max(0, total - known);
      remainItems.textContent = String(remaining);
      wordNeed.textContent = `Words needed for 100: ${remaining}`;

      applyOutcomeStyle(out);
    }

    // -----------------------------------
    // Tick / Untick all
    // -----------------------------------
    function toggleAll(){
      const lang = langSel.value;
      const mode = modeSel.value;
      const pack = DATA[lang];
      const items = (mode === "vocab") ? pack.vocab : pack.phrases;

      const total = items.length;
      let known = 0;
      for (let i=0;i<total;i++){
        if (isChecked(lang, mode, i)) known++;
      }
      const shouldTickAll = known < total;
      for (let i=0;i<total;i++){
        setChecked(lang, mode, i, shouldTickAll);
      }
      render();
    }

    // -----------------------------------
    // Events
    // -----------------------------------
    langSel.addEventListener("change", () => { searchBox.value=""; render(); });
    modeSel.addEventListener("change", () => { searchBox.value=""; render(); });
    searchBox.addEventListener("input", render);
    clearSearch.addEventListener("click", () => { searchBox.value=""; render(); });

    resetBtn.addEventListener("click", () => {
      const lang = langSel.value;
      const mode = modeSel.value;
      const key = getKey(lang, mode);
      if (state[key]) delete state[key];
      saveState(state);
      render();
    });

    toggleAllBtn.addEventListener("click", toggleAll);

    // Initial
    render();
  </script>
</body>
</html>
