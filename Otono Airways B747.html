<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otono Airways - Boeing 747 Legend Fleet (Final Corrected)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- CORE STYLING (Dark Theme) --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f172a; /* Slate-900 */
            color: #e2e8f0; /* Slate-200 */
        }
        
        .fuselage-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .fuselage {
            background-color: #1e293b; /* Slate-800 */
            border: 4px solid #334155;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            position: relative;
            padding: 20px;
        }
        
        /* Main Deck Shape */
        .main-deck {
            border-radius: 50% 50% 20% 20% / 15% 15% 5% 5%;
            min-width: 400px; 
        }
        
        /* Upper Deck Shape (The Hump) */
        .upper-deck {
            border-radius: 40% 40% 15% 15% / 20% 20% 10% 10%;
            min-width: 320px;
        }

        .deck-label {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #334155;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            color: #94a3b8;
            border: 2px solid #1e293b;
            z-index: 10;
        }

        .seat {
            width: 34px;
            height: 46px;
            margin: 2px;
            border-radius: 6px 6px 12px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            transition: transform 0.1s, box-shadow 0.1s;
            user-select: none;
            color: #e2e8f0;
            border-bottom: 3px solid;
            flex-shrink: 0;
        }
        
        /* OTONO ONE Visual */
        .otono-one-seat {
            width: 50px; 
            height: 60px;
            font-size: 11px;
            border-radius: 10px 10px 20px 20px;
            box-shadow: 0 0 15px rgba(252, 211, 77, 0.5); /* Gold glow */
        }
        /* FIRST CLASS Visual */
        .first-class-seat {
            width: 45px;
            height: 55px;
            font-size: 10px;
        }

        .seat:hover:not(.occupied) {
            transform: scale(1.2);
            z-index: 20;
            opacity: 0.95;
        }

        .seat.occupied {
            background-color: #334155 !important; /* Slate-700 */
            color: #64748b !important;
            border-color: #475569 !important;
            cursor: not-allowed;
            background-image: repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,0.1) 4px, rgba(255,255,255,0.1) 8px);
            pointer-events: none; /* Crucial fix for non-interactable occupied seats */
        }

        .seat.selected {
            background-color: #10b981 !important; /* Green-500 */
            border-color: #059669 !important;
            color: white !important;
            box-shadow: 0 0 10px #10b981;
            transform: scale(1.1);
            z-index: 15;
        }

        .row-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
        }
        
        .row-container {
            display: flex;
            justify-content: center;
        }

        .aisle {
            width: 20px; /* Standard Aisle */
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .row-label {
            width: 18px;
            font-size: 10px;
            color: #64748b;
            font-weight: 600;
            text-align: right;
            margin-right: 6px;
            flex-shrink: 0;
        }
        
        /* Layout Specific Adjustments */
        .layout-1-1 .aisle { width: 100px; } 
        .layout-1-2-1 .aisle { width: 35px; } 
        .layout-3-3 .aisle { width: 40px; } 
        .layout-2-4-2 .aisle { width: 22px; }
        .layout-3-4-3 .aisle { width: 20px; }
        .layout-2-4-2-tail-wide .aisle { width: 22px; }

        .door-exit {
            background-color: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            padding: 4px;
            margin: 10px 0;
            font-size: 9px;
            border-left: 3px solid #ef4444;
            border-right: 3px solid #ef4444;
            letter-spacing: 1px;
            text-align: center;
            font-weight: bold;
        }
        
        /* --- OTONO COLORS & BADGES --- */
        
        .good-seat-badge {
            background-color: #e9d5ff; /* Light Purple */
            color: #6d28d9; /* Deep Purple */
            border: 1px solid #d8b4fe;
        }
        .bad-seat-badge {
            background-color: #bfdbfe; /* Light Blue */
            color: #1e40af; /* Dark Blue */
            border: 1px solid #93c5fd;
        }

        /* Custom Scrollbar */
        .fuselage-scroll-container {
            max-height: 85vh;
            overflow-y: auto;
            padding: 20px;
            scrollbar-width: thin;
            scrollbar-color: #475569 #1e293b;
        }
        .fuselage-scroll-container::-webkit-scrollbar {
            width: 8px;
        }
        .fuselage-scroll-container::-webkit-scrollbar-track {
            background: #1e293b;
        }
        .fuselage-scroll-container::-webkit-scrollbar-thumb {
            background-color: #475569;
            border-radius: 4px;
        }
    </style>
</head>
<body class="h-screen flex flex-col">

    <header class="bg-purple-900 text-white p-4 shadow-2xl z-50 relative">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold flex items-center gap-3">
                    <span>✈️</span> Otono Boeing 747 <span class="text-yellow-400 text-lg font-normal italic">Legend Fleet</span>
                </h1>
                <p class="text-xs text-purple-200 mt-1 font-semibold tracking-wider">
                    The Queen of the Skies | **9 Remaining in Service** | Exclusive Premium Pricing
                </p>
            </div>
            <div class="text-right mt-2 md:mt-0 font-bold text-sm bg-purple-800/50 px-3 py-1 rounded-lg border border-purple-700">
                Variant: 747-8 Intercontinental
            </div>
        </div>
    </header>

    <div class="flex-1 max-w-7xl mx-auto w-full flex flex-col lg:flex-row gap-6 px-4 py-6 overflow-hidden">
        
        <div class="lg:w-1/3 space-y-4 flex flex-col">
            
            <div id="booking-panel" class="bg-slate-800 p-5 rounded-xl shadow-lg border-t-4 border-yellow-500 hidden transition-all">
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h2 class="text-base font-bold text-white">Your Selection</h2>
                        <div id="seat-id" class="text-4xl font-extrabold text-yellow-400 mt-1">--</div>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px] text-slate-400 uppercase tracking-widest">Price</div>
                        <div id="seat-price" class="text-2xl font-bold text-red-500">£0</div>
                    </div>
                </div>
                
                <div class="bg-slate-700/50 p-3 rounded-lg border border-slate-600 mb-3">
                    <div id="seat-deck" class="text-[10px] font-bold text-slate-400 uppercase mb-1">--</div>
                    <div id="seat-class" class="text-sm font-bold text-purple-300 mb-1">--</div>
                    <div id="seat-note" class="text-xs text-slate-300"></div>
                </div>

                <div id="seat-features" class="flex flex-wrap gap-2 mb-4">
                    </div>

                <button class="w-full bg-gradient-to-r from-yellow-600 to-yellow-700 text-white font-bold py-3 rounded-lg hover:from-yellow-700 hover:to-yellow-800 shadow-md transform active:scale-95 transition flex justify-between px-6 items-center">
                    <span>Confirm Seat</span>
                    <span>➝</span>
                </button>
            </div>

            <div class="bg-slate-800 p-5 rounded-xl shadow-lg flex-1 overflow-y-auto">
                <h3 class="font-bold text-white mb-3 border-b border-slate-600 pb-2 text-sm">Legend Fleet Pricing (Including Otono One)</h3>
                <div class="space-y-2 text-xs">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center"><div class="w-3 h-3 rounded mr-2 bg-purple-900 border border-yellow-400"></div> <span class="font-bold text-yellow-400">Otono One (Suite)</span></div>
                        <span class="font-mono text-white font-bold">£16,000</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center"><div class="w-3 h-3 rounded mr-2 bg-purple-700 border border-purple-300"></div> First Class</div>
                        <span class="font-mono text-white font-bold">£8,500</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center"><div class="w-3 h-3 rounded mr-2 bg-red-900 border border-red-700"></div> Business Class</div>
                        <span class="font-mono text-white font-bold">£5,000</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center"><div class="w-3 h-3 rounded mr-2 bg-red-700 border border-red-500"></div> Premium Economy</div>
                        <span class="font-mono text-white font-bold">£3,000</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center"><div class="w-3 h-3 rounded mr-2 bg-red-500 border border-red-400"></div> Economy Class</div>
                        <span class="font-mono text-white font-bold">£2,100</span>
                    </div>
                </div>

                <h3 class="font-bold text-white mt-5 mb-3 border-b border-slate-600 pb-2 text-sm">Seat Features</h3>
                <div class="space-y-2 text-xs">
                     <div class="flex items-center">
                        <div class="w-3 h-3 rounded-sm mr-2 good-seat-badge"></div>
                        <span class="text-slate-300">Preferred / Extra Space (+Fee)</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-3 h-3 rounded-sm mr-2 bad-seat-badge"></div>
                        <span class="text-slate-300">High Traffic / Limited Recline</span>
                    </div>
                    <div class="flex items-center"><div class="w-3 h-3 rounded mr-2 bg-slate-700 border border-slate-500"></div> Occupied (~25%)</div>
                </div>
            </div>
        </div>

        <div class="lg:w-2/3 flex justify-center fuselage-scroll-container rounded-xl bg-slate-900/50">
            <div class="fuselage-container">
                
                <div class="fuselage upper-deck">
                    <div class="deck-label">UPPER DECK (Economy | 3-3)</div>
                    <div class="w-full h-16 border-b border-slate-600 mb-4 flex flex-col items-center justify-center text-slate-500 relative">
                        <div class="text-[8px] tracking-[0.2em] font-bold">STAIRS & LAVATORIES</div>
                        <div class="flex gap-1 mt-1">
                            <div class="w-3 h-1 bg-slate-600/50 rounded-full"></div>
                            <div class="w-3 h-1 bg-slate-600/50 rounded-full"></div>
                        </div>
                    </div>
                    <div id="upper-deck-container" class="flex flex-col items-center">
                        </div>
                    <div class="mt-4 text-[8px] text-center text-slate-500">REAR UPPER GALLEY</div>
                </div>

                <div class="fuselage main-deck pb-10">
                    <div class="deck-label">MAIN DECK</div>
                    <div class="w-full h-24 border-b border-slate-600 mb-6 flex flex-col items-center justify-center relative overflow-hidden">
                        <span class="font-bold text-3xl tracking-widest text-purple-900 opacity-20">747-8i</span>
                        <div class="absolute bottom-2 text-[8px] tracking-[0.2em] font-bold text-slate-500">NOSE CONE</div>
                    </div>

                    <div id="main-deck-container" class="flex flex-col items-center">
                        </div>

                    <div class="mt-8 pt-4 border-t border-slate-600 text-center text-slate-500 text-[9px] flex flex-col items-center">
                        <div class="mb-1 font-bold text-purple-900 opacity-30 text-lg">OTONO</div>
                        MAIN DECK REAR GALLEY & LAVATORIES
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---

        // Provided Color Codes
        const CLASS_COLORS = {
            OTONO_ONE: 'bg-purple-900 border-yellow-400 text-yellow-100', // Deep Purple & Gold
            FIRST: 'bg-purple-700 border-purple-300 text-white',
            BUSINESS: 'bg-red-900 border-red-700 text-white',
            PREM_ECO: 'bg-red-700 border-red-500 text-white',
            ECONOMY: 'bg-red-500 border-red-400 text-white hover:bg-red-400 hover:border-red-300',
        };

        // Legend Fleet Pricing (Higher than standard)
        const PRICES = {
            OTONO_ONE: 16000, 
            FIRST: 8500,
            BUSINESS: 5000,
            PREM_ECO: 3000,
            ECONOMY: 2100,
        };
        // Surcharges for Preferred Seats
        const SURCHARGES = {
            OTONO_ONE_PREFERRED: 0, 
            FIRST_PREFERRED: 500,
            BUSINESS_PREFERRED: 400,
            PREM_ECO_PREFERRED: 300,
            ECONOMY_PREFERRED: 250
        };

        // Helper to create a range of numbers
        function range(start, end) {
            return Array.from({length: (end - start) + 1}, (v, k) => k + start);
        }

        // --- B747-8i FLEET DATA (ACCURATELY MAPPED TO DIAGRAM & CORRECTIONS) ---
        const B747_DATA = {
            upperDeck: [
                // 3-3 Layout: A B C | Aisle | H J K
                { type: 'ECONOMY', rows: range(77, 91), layout: '3-3' }, 
                // Rows 92-95: A, B, C removed due to staircase blockage
                { type: 'ECONOMY', rows: range(92, 95), layout: '0-3' }, // Custom layout for blocked A, B, C side
            ],
            mainDeck: [
                { type: 'OTONO_ONE', rows: [1, 2], layout: '1-1' }, 
                { type: 'DOOR', label: 'GALLEY / CREW REST' }, 
                { type: 'FIRST', rows: [5], layout: '1-1' }, // Row 5 is 1-1 Preferred
                { type: 'FIRST', rows: [6, 7, 8], layout: '1-2-1' }, // Rows 6, 7, 8 are 1-2-1
                { type: 'DOOR', label: 'DOOR 1 (L/R) / GALLEY / STAIRS' },
                { type: 'BUSINESS', rows: range(11, 18), layout: '1-2-1' }, 
                { type: 'DOOR', label: 'ONBOARD LOUNGE "Grandpa Belt\'s favourite spot", STAIRCASE' },
                { type: 'BUSINESS', rows: range(22, 27), layout: '1-2-1' },
                { type: 'BUSINESS', rows: range(32, 35), layout: '1-2-1' },
                { type: 'DOOR', label: 'DOOR 3 (L/R) / GALLEY / PREM ECO BULKHEAD' },
                { type: 'PREM_ECO', rows: range(49, 52), layout: '2-4-2' }, // Corrected to 4 rows only
                { type: 'DOOR', label: 'DOOR 4 (L/R) / LAVATORIES' },
                { type: 'ECONOMY', rows: range(58, 72), layout: '3-4-3' }, // Starts at 53 after PE 
                { type: 'ECONOMY', rows: range(73, 76), layout: '2-4-2-tail-wide' }, 
                { type: 'DOOR', label: 'DOOR 5 (L/R) / LAVATORIES' }, 
            ],
            // Define rows considered "bad" due to proximity to lavs/galleys or lack of window
            badRows: {
                main: [2, 8, 18, 27, 35, 52, 72, 76], 
                upper: [77, 95]
            },
        };

        let selectedSeatEl = null;

        // Determine seat letters based on layout type
        function getSeatLetters(layout, row) {
            if (layout === '1-1') return ['A', 'K']; 
            if (layout === '1-2-1') return ['A', 'D', 'G', 'K']; 
            if (layout === '3-3') return ['A', 'B', 'C', 'H', 'J', 'K']; 
            if (layout === '0-3') return ['H', 'J', 'K']; 
            if (layout === '2-4-2') return ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'K'];
            if (layout === '3-4-3') return ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J', 'K'];
            if (layout === '2-4-2-tail-wide') return ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'K']; 
            return [];
        }

        // Logic to determine seat price, notes, and status (preferred/bad)
        function getSeatData(row, letter, cabin, deck) {
            let price = PRICES[cabin];
            let note = cabin.replace('_', ' ');
            let isPreferred = false;
            let isBad = false;
            let baseClass = CLASS_COLORS[cabin];
            let surcharge = 0;

            // --- PREFERRED SEAT LOGIC ---

            // 1. Any seat on upper deck
            if (deck === 'upper') {
                isPreferred = true;
                note = "Upper Deck Preferred (Quiet Economy)";
                surcharge = SURCHARGES.ECONOMY_PREFERRED;
            }
            // 2. First class: Row 5
            else if (cabin === 'FIRST' && row === 5) {
                isPreferred = true;
                note = "First Class Preferred (Row 5 - Private 1-1)";
                surcharge = SURCHARGES.FIRST_PREFERRED;
            }
            // 3. Business class: row 18 and 22 (near lounge/doors)
            else if (cabin === 'BUSINESS' && (row === 18 || row === 22)) {
                isPreferred = true;
                note = "Business Preferred (Near Lounge/Exit)";
                surcharge = SURCHARGES.BUSINESS_PREFERRED;
            }
            // 5. Premium economy: row 49 (extra legroom exit)
            else if (cabin === 'PREM_ECO' && row === 49) {
                isPreferred = true;
                note = "Prem. Eco Preferred (XL Legroom Bulkhead)";
                surcharge = SURCHARGES.PREM_ECO_PREFERRED;
            }
            // 6. Economy: row 58 (extra legroom exit)
            else if (cabin === 'ECONOMY' && row === 58) {
                isPreferred = true;
                note = "Economy Preferred (XL Legroom Exit)";
                surcharge = SURCHARGES.ECONOMY_PREFERRED;
            }
            // 4. Economy: row 73-76 seats A, C, H, K (extra floor room)
            else if (cabin === 'ECONOMY' && row >= 73 && row <= 76 && ['A', 'C', 'H', 'K'].includes(letter)) {
                isPreferred = true;
                note = "Economy Preferred (Extra Floor Room)";
                surcharge = SURCHARGES.ECONOMY_PREFERRED;
            }
            
            // OTONO ONE SPECIAL CASE 
            else if (cabin === 'OTONO_ONE') {
                note = "Otono One Private Suite (Top Tier)";
                isPreferred = true; 
            }

            // Apply Surcharge and Visual Styling for Preferred
            if (isPreferred && surcharge > 0) {
                price += surcharge;
            }
            if (isPreferred) {
                 baseClass = baseClass.replace('border-', 'border-yellow-400 border-2 ');
            }

            // --- BAD SEAT LOGIC ---
            const badRowList = B747_DATA.badRows[deck];
            if (badRowList && badRowList.includes(row)) {
                if (!isPreferred) {
                    isBad = true;
                    note = cabin.replace('_', ' ') + " (High Traffic / Limited Recline)";
                }
            }

            return { price, note, isPreferred, isBad, baseClass };
        }

        // Create a single seat element
        function createSeat(row, letter, cabin, deck, layout) {
            const seatId = `${row}${letter}`;
            const el = document.createElement('div');
            el.innerText = letter;
            el.classList.add('seat');

            const { price, note, isPreferred, isBad, baseClass } = getSeatData(row, letter, cabin, deck);
            
            el.className += ` ${baseClass}`;

            // Visual Adjustments based on class/layout
            if (cabin === 'OTONO_ONE') {
                el.classList.add('otono-one-seat');
                el.innerText = "S" + letter;
            } else if (cabin === 'FIRST') {
                 el.classList.add('first-class-seat');
            }
            
            // Visual adjustments for specific rows (e.g., extra legroom/exit rows)
            if ([5, 11, 22, 32, 49, 53, 58].includes(row)) {
                 el.style.marginBottom = '12px';
            }
            if (row === 1) { // Gap before row 1
                 el.style.marginTop = '12px';
            }


            // --- OCCUPIED SEAT FIX ---
            // Randomly mark some seats as occupied (approx 25%)
            if (Math.random() < 0.25) {
                el.classList.add('occupied');
                // Importantly, the occupied class now handles making it non-interactable (pointer-events: none)
            }

            // Attach data for click handler
            el.dataset.id = seatId;
            el.dataset.price = price;
            el.dataset.note = note;
            el.dataset.cabin = cabin.replace('_', ' ');
            el.dataset.deck = deck === 'upper' ? 'Upper Deck' : 'Main Deck';
            el.dataset.isPreferred = isPreferred;
            el.dataset.isBad = isBad;

            // Only assign the click handler if the seat is NOT occupied
            if (!el.classList.contains('occupied')) {
                el.onclick = () => selectSeat(el);
            }
            return el;
        }

        // Create a complete row of seats
        function createRow(row, cabin, layout, deck) {
            const rowWrapper = document.createElement('div');
            rowWrapper.classList.add('row-wrapper');
            
            const rowLabelL = document.createElement('div');
            rowLabelL.classList.add('row-label');
            rowLabelL.innerText = row;
            rowWrapper.appendChild(rowLabelL);

            const rowContainer = document.createElement('div');
            rowContainer.classList.add('row-container', `layout-${layout.toLowerCase()}`);
            
            const letters = getSeatLetters(layout, row);
            
            letters.forEach((letter, index) => {
                const seatEl = createSeat(row, letter, cabin, deck, layout);
                rowContainer.appendChild(seatEl);

                // Insert Aisles based on layout pattern
                if (layout === '1-1' && index === 0) addAisle(rowContainer, 'LOUNGE / WIDE AISLE');
                if (layout === '1-2-1' && (letter === 'A' || letter === 'G')) addAisle(rowContainer); 
                if (layout === '3-3' && letter === 'C') addAisle(rowContainer); 
                if (layout === '2-4-2' && (letter === 'C' || letter === 'G')) addAisle(rowContainer); 
                if (layout === '2-4-2-tail-wide' && (letter === 'C' || letter === 'G')) addAisle(rowContainer); 
                if (layout === '3-4-3' && (letter === 'C' || letter === 'G')) addAisle(rowContainer); 
            });

            // Handle Row 92-95 blockage: must manually add a large gap for the A B C side
            if (layout === '0-3') {
                const gap = document.createElement('div');
                gap.className = 'aisle w-16 mr-6 flex-shrink-0 bg-slate-700/50 rounded-lg';
                gap.innerHTML = `<span class="text-[8px] text-slate-400 font-bold text-center p-1">STAIRCASE BLOCK</span>`;
                rowContainer.insertBefore(gap, rowContainer.firstChild); // Place at the start (left side)
            }
            
            rowWrapper.appendChild(rowContainer);

            const rowLabelR = document.createElement('div');
            rowLabelR.classList.add('row-label', 'ml-2', 'text-left');
            rowLabelR.innerText = row;
            rowWrapper.appendChild(rowLabelR);

            return rowWrapper;
        }

        // Helper to add an aisle element
        function addAisle(container, label = '') {
            const aisleEl = document.createElement('div');
            aisleEl.className = 'aisle';
            if (label) {
                aisleEl.innerHTML = `<span class="text-[8px] text-slate-500">${label}</span>`;
            }
            container.appendChild(aisleEl);
        }

        // Main function to render the entire seat map
        function renderMap() {
            // Render Upper Deck
            const upperContainer = document.getElementById('upper-deck-container');
            B747_DATA.upperDeck.forEach(section => renderSection(section, upperContainer, 'upper'));

            // Render Main Deck
            const mainContainer = document.getElementById('main-deck-container');
            B747_DATA.mainDeck.forEach(section => renderSection(section, mainContainer, 'main'));
        }

        // Helper to render a specific fuselage section (cabin or door)
        function renderSection(section, container, deck) {
            if (section.type === 'DOOR') {
                const door = document.createElement('div');
                door.className = 'door-exit w-full';
                door.innerText = section.label;
                container.appendChild(door);
            } else {
                section.rows.forEach(row => {
                    const rowEl = createRow(row, section.type, section.layout, deck);
                    container.appendChild(rowEl);
                });
            }
        }
        
        // Handle seat selection click
        function selectSeat(el) {
            if (el.classList.contains('occupied')) return;

            if (selectedSeatEl) selectedSeatEl.classList.remove('selected');
            el.classList.add('selected');
            selectedSeatEl = el;

            // Update Booking Panel Info
            const panel = document.getElementById('booking-panel');
            panel.classList.remove('hidden');

            document.getElementById('seat-id').innerText = el.dataset.id;
            document.getElementById('seat-price').innerText = `£${Number(el.dataset.price).toLocaleString()}`;
            document.getElementById('seat-deck').innerText = el.dataset.deck.toUpperCase();
            document.getElementById('seat-class').innerText = el.dataset.cabin;
            document.getElementById('seat-note').innerText = el.dataset.note;

            // Update Badges
            const featContainer = document.getElementById('seat-features');
            featContainer.innerHTML = '';

            if (el.dataset.isPreferred === 'true') {
                featContainer.innerHTML += `
                    <div class="flex items-center px-2 py-1 rounded-md bg-purple-900/50 border border-purple-300/30">
                        <div class="w-3 h-3 rounded-sm mr-2 good-seat-badge"></div>
                        <span class="text-xs text-purple-100 font-medium">Good Seat</span>
                    </div>`;
            }
            if (el.dataset.isBad === 'true') {
                featContainer.innerHTML += `
                    <div class="flex items-center px-2 py-1 rounded-md bg-blue-900/50 border border-blue-300/30">
                        <div class="w-3 h-3 rounded-sm mr-2 bad-seat-badge"></div>
                        <span class="text-xs text-blue-100 font-medium">Bad Seat</span>
                    </div>`;
            }
        }
        
        // Initialize map on load
        renderMap();
    </script>
</body>
</html>